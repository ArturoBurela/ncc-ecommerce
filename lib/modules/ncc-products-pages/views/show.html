{% extends "layout.html" %}
{% block title %}{{ data.piece.title }}{% endblock %}

{% block main %}
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<nav>
  <a type="button" name="button" href="/cart"> Cart </a>
  <a type="button" name="button" href="/catalog"> Back to catalog </a>
</nav>
<div class="apos-event-preview">
  <h3 class="apos-event-title">{{ data.piece.title }}</h3>
  <h5 class="apos-event-date">{{ data.piece.price}} at {{ data.piece.total}}</h5>
  <h5>Description</h5>
{{
  apos.area(
    data.piece,
    'description',
    'apostrophe-rich-text',
    {
    }
  )
}}
  <select id="quantity">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10+</option>
  </select>
  <button id="cart" type="button" name="button"> Add to cart</button>
</div>
{% endblock %}
{% block extraBody %}
<script
src="https://code.jquery.com/jquery-3.3.1.min.js"
integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
crossorigin="anonymous"></script>
<script type="text/javascript">
$( "#cart" ).click(function() {
  addToCart();
});
function addToCart() {
  let val = $( "#quantity" ).val();
  $.get("/addtocart/{{data.piece._id}}/"+val, function(data, status){
    alert('Product added to cart');
  });
}
</script>
{% endblock %}
