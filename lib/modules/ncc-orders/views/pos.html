{% extends "layout.html" %}
{% block title %}
POS
{% endblock %}
{% block extraHead %}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
{% endblock %}

{% block main %}
  <form>
    <input id="target" type="text" value="Hello there">
  </form>
  <div id="results">
    Product <br>
  </div>

{% endblock %}
{% block afterMain %}

  <script type="text/javascript">
    $("#target").keyup(function () {
      var key = $('#target').val();
      if (key.length > 4) {
        //alert( "Handler for .keyup() called." );
        $.ajax({
          url: "/api/v1/ncc-product?serial=" + key,
          cache: false
        })
          .done(function (response) {
            var value = response.results[0];
            console.log(value)
            var html = value.title + ' ' + value.price;
            html += '<br>';
            $("#results").append(html);
          });
      }
    });
/*
    $("#results").click(function () {
      $("#target").keyup();
    });
*/
  </script>

{% endblock %}
