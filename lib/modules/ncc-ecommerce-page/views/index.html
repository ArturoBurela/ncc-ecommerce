{% extends "layout.html" %}
{% block title %}
{{ data.title }}
{% endblock %}
{% block main %}
<div class="container" data-apos-ajax-context="cart">
  <div class="row">
    <h2>Carrito de compras</h2>
  </div>
  <div class="row text-justified" id="cart-products">
    <div class="col-12">
      <div class="card h-100">
        <div class="card-header text-left">
          <div class="row">
            <div class="col">
              Actualmente en el carrito
            </div>
            <div class="col text-right">
              {{ piece.createdAt | date("DD/MM/YYYY") }}
            </div>
          </div>
        </div>
        <div class="card-body text-left">
          <div class="row">
            <div class="col-8">
              <ul class="list-group list-group-flush">
                {% if not data.cart %}
                <p>Cart is empty</p>
                {% endif %}
                {% for p in data.cart %}
                <li class="list-group-item">
                  <h4><a href="{{ p.product_data._url }}">{{ p.product_data.title }}</a></h4>
                  <ul class="list-group">
                    <li class="list-group-item">Cantidad: <span>{{p.amount}}</span></li>
                    <li class="list-group-item">Precio: <span>{{p.product_data.price}}</span></li>
                    <li class="list-group-item">Descuento: <span>{{p.product_data.discount}}</span></li>
                    <li class="list-group-item">SubTotal: <span>{{p.product_data.total*p.amount | round(2)}}</span></li>
                  </ul>
                  <button id="delete" class="btn btn-info" type="button" name="button" product="{{p.product_data._id}}">Remove</button>
                </li>
                {% endfor %}
              </ul>
            </div>
            <div class="col-4">
              <ul class="list-group">
                <li class="list-group-item alert alert-info">Descuentos: ${{data.pay.discount}}</li>
                <li class="list-group-item alert alert-info">Total a pagar: ${{data.pay.total}}</li>
                <li class="list-group-item alert alert-info">
                  <a href="/purchase-paypal" class="btn btn-primary">Pagar con Paypal</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
